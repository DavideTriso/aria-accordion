!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,window)}(function(i,e){"use strict";var o="ariaAccordion",l=0,c="aria-controls",a="aria-expanded",d="aria-hidden",r="aria-labelledby",p="aria-disabled",u="role",g="true",f="false",h=i(e);function m(e,n,t){return e.is("[id]")||e.attr("id",n+t),e.attr("id")}function b(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!(!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)&&"ctrl":"none"}function t(e,n){var t=this;t.element=i(e),t.settings=i.extend({},i.fn[o].defaultSettings,n),t.elementId=m(t.element,t.settings.accGroupIdPrefix,l),t.elements={acc:t.element.find("."+t.settings.accClass),heading:t.element.find("."+t.settings.headingClass),btn:t.element.find("."+t.settings.btnClass),panel:t.element.find("."+t.settings.panelClass),content:t.element.find("."+t.settings.contentClass)},t.elementsLenght=t.elements.acc.length,t.elementsStatus=[],t.init()}i.extend(t.prototype,{init:function(){var n=this,e=n.element,t=n.elementId,s=n.elements,a=n.settings;s.acc.each(function(e){m(s.heading.eq(e),t+"__accordion-heading--",e),m(s.panel.eq(e),t+"__accordion-panel--",e),m(s.btn.eq(e),t+"__accordion-btn--",e),s.btn.eq(e).attr(c,s.panel.eq(e).attr("id")),s.panel.eq(e).attr(r,s.heading.eq(e).attr("id"))}),"string"==typeof a.contentRole?s.content.attr(u,a.contentRole):Array.isArray(a.contentRole)&&s.content.each(function(e){i(this).attr(u,a.contentRole[e])}),a.expandOnlyOne?s.acc.each(function(e){0<e?n.slideUp(e,!1):n.slideDown(0,!1)}):s.acc.each(function(e){i(this).is("."+n.settings.expandedClass)?n.slideDown(e,!1):n.slideUp(e,!1)}),e.on("click."+o+"."+l,"."+a.btnClass,function(){n.toggle(s.btn.index(i(this)),!0)}),a.keyboardNavigation&&e.on("keydown."+o+"."+l,function(e){n.keyboardNavigation(e)}),h.trigger(o+".initialised",[n]),l+=1},toggle:function(e,n){var t=this,s=t.settings,a=t.elementsStatus;if(s.expandOnlyOne){if(!0===a[e])return!1;t.slideUp(a.indexOf(!0),n),t.slideDown(e,n)}else!0===a[e]?t.slideUp(e,n):t.slideDown(e,n)},updateElementStatus:function(e,n){this.elementsStatus[e]=n},keyboardNavigation:function(e){var n=this,t=n.settings,s=n.elements,a=s.btn,i=n.elementsLenght,o=n.element.find(":focus"),l=0,c=e.keyCode;if(o.is("."+t.btnClass)){if(l=a.index(o),"none"===b(e))switch(c){case 38:0<l&&(a.eq(l-1).focus(),e.preventDefault());break;case 40:l<i&&(a.eq(l+1).focus(),e.preventDefault());break;case 36:s.btn.eq(0).focus();break;case 35:a.eq(i-1).focus()}else if("ctrl"===b(e))switch(c){case 81:0<l&&a.eq(l-1).focus();break;case 87:l<i&&a.eq(l+1).focus()}}else if(0<o.closest("."+t.panelClass).length&&"ctrl"===b(e))switch(l=s.panel.index(o.closest("."+t.panelClass)),c){case 81:a.eq(l).focus();break;case 87:l<i&&a.eq(l+1).focus()}},expand:function(e){var n=this,t=n.elements,s=n.settings;t.acc.eq(e).addClass(s.expandedClass),t.btn.eq(e).attr(a,g).addClass(s.btnExpandedClass),t.panel.eq(e).attr(d,f).addClass(s.panelExpandedClass),s.expandOnlyOne&&t.btn.eq(e).attr(p,g),n.updateElementStatus(e,!0)},collapse:function(e){var n=this,t=n.elements,s=n.settings;t.acc.eq(e).removeClass(s.expandedClass),t.btn.eq(e).attr(a,f).removeClass(s.btnExpandedClass),t.panel.eq(e).attr(d,g).removeClass(s.panelExpandedClass),s.expandOnlyOne&&n.elements.btn.eq(e).attr(p,f),n.updateElementStatus(e,!1)},slideDown:function(e,n){var t=this,s=t.settings,a=n?s.slideSpeed:0;s.cssTransitions||t.elements.panel.eq(e).stop().slideDown(a,s.easing),t.expand(e),h.trigger(o+".slideDown",[t,e])},slideUp:function(e,n){var t=this.settings,s=n?t.slideSpeed:0;t.cssTransitions||this.elements.panel.eq(e).stop().slideUp(s,t.easing),this.collapse(e),h.trigger(o+".slideUp",[this,e])},methodCaller:function(e,n){var t=this;t.elementsStatus;switch("number"!=typeof n&&("string"==typeof n&&(n=i(n)),"object"==typeof n&&1===n.length&&n.hasClass(t.settings.accClass)&&1===n.closest(t.element).length&&(n=t.elements.acc.index(n))),e){case"toggle":t.toggle(n,!0);break;case"toggleNoAnimate":t.toggle(n,!1)}}}),i.fn[o]=function(e,n){return this.each(function(){i.data(this,"plugin_"+o)||"object"!=typeof e&&void 0!==e?"string"==typeof e&&void 0!==n&&i.data(this,"plugin_"+o).methodCaller(e,n):i.data(this,"plugin_"+o,new t(this,e))})},i.fn[o].defaultSettings={accGroupIdPrefix:"accordion-group--",accClass:"accordion-group__accordion",headingClass:"accordion-group__accordion-heading",btnClass:"accordion-group__accordion-btn",panelClass:"accordion-group__accordion-panel",contentClass:"accordion-group__accordion-content",contentRole:"document",slideSpeed:300,easing:"swing",cssTransitions:!1,expandedClass:"accordion-group__accordion_expanded",btnExpandedClass:"accordion-group__accordion-btn_expanded",panelExpandedClass:"accordion-group__accordion-panel_expanded",expandOnlyOne:!1,keyboardNavigation:!0}});