!function(e){"function"==typeof define&&define.amd&&define(["jquery"],e)}(function(e,n){"use strict";function t(e,n,t){return e.is("[id]")||e.attr("id",n+t),e.attr("id")}function a(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey?!(!e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)&&"ctrl":"none"}function s(n,a){var s=this;s.element=e(n),s.settings=e.extend({},e.fn[i].defaultSettings,a),s.elementId=t(s.element,s.settings.accGroupIdPrefix,o),s.elements={acc:s.element.find("."+s.settings.accClass),heading:s.element.find("."+s.settings.headingClass),btn:s.element.find("."+s.settings.btnClass),panel:s.element.find("."+s.settings.panelClass),content:s.element.find("."+s.settings.contentClass)},s.elementsLenght=s.elements.acc.length,s.elementsStatus=[],s.init()}var i="ariaAccordion",o=0,c={aCs:"aria-controls",aEx:"aria-expanded",aHi:"aria-hidden",aLab:"aria-labelledby",aDi:"aria-disabled",r:"role",tbI:"tabindex",t:"true",f:"false"},l=e(n);e.extend(s.prototype,{init:function(){var n=this,a=n.element,s=n.elementId,d=n.elements,r=n.settings;d.acc.each(function(e){t(d.heading.eq(e),s+"__accordion-heading--",e),t(d.panel.eq(e),s+"__accordion-panel--",e),t(d.btn.eq(e),s+"__accordion-btn--",e),d.btn.eq(e).attr(c.aCs,d.panel.eq(e).attr("id")),d.panel.eq(e).attr(c.aLab,d.heading.eq(e).attr("id"))}),"string"==typeof r.contentRole?d.content.attr(c.r,r.contentRole):Array.isArray(r.contentRole)&&d.content.each(function(n){e(this).attr(c.r,r.contentRole[n])}),r.expandOnPageLoad||r.expandOnlyOne?d.acc.each(function(e){e>0?n.slideUp(e,!1):n.slideDown(0,!1)}):d.acc.each(function(e){n.slideUp(e,!1)}),a.on("click."+i+"."+o,"."+r.btnClass,function(){n.toggle(d.btn.index(e(this)),!0)}),r.keyboardNavigation&&a.on("keydown."+i+"."+o,function(e){n.keyboardNavigation(e)}),l.trigger(i+".initialised",[n]),o+=1},toggle:function(e,n){var t=this,a=t.settings,s=t.elementsStatus;if(a.expandOnlyOne){if(!0===s[e])return!1;t.slideUp(s.indexOf(!0),n),t.slideDown(e,n)}else!0===s[e]?t.slideUp(e,n):t.slideDown(e,n)},updateElementStatus:function(e,n){this.elementsStatus[e]=n},keyboardNavigation:function(e){var n=this,t=n.settings,s=n.elements,i=s.btn,o=n.elementsLenght,c=n.element.find(":focus"),l=0,d=e.keyCode;if(c.is("."+t.btnClass)){if(l=i.index(c),"none"===a(e))switch(d){case 38:l>0&&(i.eq(l-1).focus(),e.preventDefault());break;case 40:l<o&&(i.eq(l+1).focus(),e.preventDefault());break;case 36:s.btn.eq(0).focus();break;case 35:i.eq(o-1).focus()}else if("ctrl"===a(e))switch(d){case 81:l>0&&i.eq(l-1).focus();break;case 87:l<o&&i.eq(l+1).focus()}}else if(c.closest("."+t.panelClass).length>0&&"ctrl"===a(e))switch(l=s.panel.index(c.closest("."+t.panelClass)),d){case 81:i.eq(l).focus();break;case 87:l<o&&i.eq(l+1).focus()}},expand:function(e){var n=this,t=n.elements,a=n.settings;t.acc.eq(e).addClass(a.accExpandedClass),t.btn.eq(e).attr(c.aEx,c.t).addClass(a.btnExpandedClass),t.panel.eq(e).attr(c.aHi,c.f).addClass(a.panelExpandedClass),a.expandOnlyOne&&t.btn.eq(e).attr(c.aDi,c.t),n.updateElementStatus(e,!0)},collapse:function(e){var n=this,t=n.elements,a=n.settings;t.acc.eq(e).removeClass(a.accExpandedClass),t.btn.eq(e).attr(c.aEx,c.f).removeClass(a.btnExpandedClass),t.panel.eq(e).attr(c.aHi,c.t).removeClass(a.panelExpandedClass),a.expandOnlyOne&&n.elements.btn.eq(e).attr(c.aDi,c.f),n.updateElementStatus(e,!1)},slideDown:function(e,n){var t=this,a=t.settings,s=n?a.slideSpeed:0;a.cssTransitions||t.elements.panel.eq(e).stop().slideDown(s,a.easing),t.expand(e),l.trigger(i+".slideDown",[t,e])},slideUp:function(e,n){var t=this,a=t.settings,s=n?a.slideSpeed:0;a.cssTransitions||t.elements.panel.eq(e).stop().slideUp(s,a.easing),t.collapse(e),l.trigger(i+".slideUp",[t,e])},methodCaller:function(n,t){var a=this;a.elementsStatus;switch("number"!=typeof t&&("string"==typeof t&&(t=e(t)),"object"==typeof t&&1===t.length&&t.hasClass(a.settings.accClass)&&1===t.closest(a.element).length&&(t=a.elements.acc.index(t))),n){case"toggle":a.toggle(t,!0);break;case"toggleNoAnimate":a.toggle(t,!1)}}}),e.fn[i]=function(n,t){return this.each(function(){var a=this;e.data(a,"plugin_"+i)||"object"!=typeof n&&void 0!==n?"string"==typeof n&&void 0!==t&&e.data(a,"plugin_"+i).methodCaller(n,t):e.data(a,"plugin_"+i,new s(a,n))})},e.fn[i].defaultSettings={accGroupIdPrefix:"accordion-group--",accClass:"accordion-group__accordion",headingClass:"accordion-group__accordion-heading",btnClass:"accordion-group__accordion-btn",panelClass:"accordion-group__accordion-panel",contentClass:"accordion-group__accordion-content",contentRole:"document",slideSpeed:300,easing:"swing",cssTransitions:!1,expandedClass:"accordion-group__accordion_expanded",btnExpandedClass:"accordion-group__accordion-btn_expanded",panelExpandedClass:"accordion-group__accordion-panel_expanded",expandOnPageLoad:!0,expandOnlyOne:!1,keyboardNavigation:!0}}(jQuery,window));